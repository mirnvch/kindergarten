{"id":"FACT-a1b2c3d4","content_hash":"sha256:8f7e6d5c4b3a2190","created_at":"2026-01-29T10:00:00Z","updated_at":"2026-01-29T10:00:00Z","status":"active","topics":["age","months"],"assertion":"Child age is stored in months (minAge, maxAge fields) for precision with infants","guidance":"Always convert years to months when comparing ages. Use dateOfBirth to calculate current age in months.","evidence":"Prisma schema: minAge Int // in months, maxAge Int // in months","learned_from":"schema review","supersedes":null,"related_to":[]}
{"id":"FACT-b2c3d4e5","content_hash":"sha256:9a8b7c6d5e4f3210","created_at":"2026-01-29T10:00:00Z","updated_at":"2026-01-29T10:00:00Z","status":"active","topics":["age","eligibility"],"assertion":"Age eligibility check must use child's age at enrollment start date, not current age","guidance":"When checking daycare compatibility, calculate child age at desiredStart or startDate, not today's date.","evidence":"WaitlistEntry has desiredStart field; Enrollment has startDate field","learned_from":"business logic analysis","supersedes":null,"related_to":["FACT-a1b2c3d4"]}
{"id":"FACT-c3d4e5f6","content_hash":"sha256:0b1c2d3e4f5a6789","created_at":"2026-01-29T10:00:00Z","updated_at":"2026-01-29T10:00:00Z","status":"active","topics":["reviews","scale"],"assertion":"Review ratings use 1-5 scale for both overall and detailed ratings (safety, cleanliness, staff, program, value)","guidance":"All rating fields are integers 1-5. Average calculations should handle null detailed ratings.","evidence":"Prisma schema: rating Int // 1-5, safetyRating Int? // 1-5","learned_from":"schema review","supersedes":null,"related_to":[]}
{"id":"FACT-d4e5f6a7","content_hash":"sha256:1c2d3e4f5a6b7890","created_at":"2026-01-29T10:00:00Z","updated_at":"2026-01-29T10:00:00Z","status":"active","topics":["booking","status","transitions"],"assertion":"Booking status transitions: PENDING -> CONFIRMED -> COMPLETED or CANCELLED or NO_SHOW","guidance":"PENDING is initial state. Only PENDING bookings can be CONFIRMED. COMPLETED/CANCELLED/NO_SHOW are terminal states.","evidence":"BookingStatus enum in Prisma schema","learned_from":"schema review","supersedes":null,"related_to":[]}
{"id":"FACT-e5f6a7b8","content_hash":"sha256:2d3e4f5a6b7c8901","created_at":"2026-01-29T10:00:00Z","updated_at":"2026-01-29T10:00:00Z","status":"active","topics":["pricing","commission"],"assertion":"Platform takes commission from payments via platformFee field, netAmount = amount - platformFee","guidance":"When displaying earnings to daycare owners, use netAmount. When displaying to parents, use amount.","evidence":"Payment model: platformFee Decimal?, netAmount Decimal?","learned_from":"schema review","supersedes":null,"related_to":[]}
{"id":"FACT-f6a7b8c9","content_hash":"sha256:3e4f5a6b7c8d9012","created_at":"2026-01-29T10:00:00Z","updated_at":"2026-01-29T10:00:00Z","status":"active","topics":["stripe","connect"],"assertion":"Daycares use Stripe Connect for payments. stripeAccountId stores connected account, stripeOnboarded indicates completion","guidance":"Check stripeOnboarded=true before processing payments. Redirect to onboarding if false.","evidence":"Daycare model: stripeAccountId String?, stripeOnboarded Boolean","learned_from":"schema review","supersedes":null,"related_to":["FACT-e5f6a7b8"]}
{"id":"FACT-a7b8c9d0","content_hash":"sha256:4f5a6b7c8d9e0123","created_at":"2026-01-29T10:00:00Z","updated_at":"2026-01-29T10:00:00Z","status":"active","topics":["enrollment","waitlist"],"assertion":"Waitlist position is explicit (position field), not calculated from createdAt","guidance":"When adding to waitlist, set position = MAX(position) + 1 for that daycare. Update positions when entries are removed.","evidence":"WaitlistEntry model: position Int","learned_from":"schema review","supersedes":null,"related_to":[]}
{"id":"FACT-b8c9d0e1","content_hash":"sha256:5a6b7c8d9e0f1234","created_at":"2026-01-29T10:00:00Z","updated_at":"2026-01-29T10:00:00Z","status":"active","topics":["users","roles"],"assertion":"Four user roles: PARENT, DAYCARE_OWNER, DAYCARE_STAFF, ADMIN with different permissions","guidance":"PARENT can book/review. DAYCARE_OWNER/STAFF manage via DaycareStaff relation. ADMIN has platform access.","evidence":"UserRole enum in Prisma schema","learned_from":"schema review","supersedes":null,"related_to":[]}
{"id":"FACT-c9d0e1f2","content_hash":"sha256:6b7c8d9e0f1a2345","created_at":"2026-01-29T10:00:00Z","updated_at":"2026-01-29T10:00:00Z","status":"active","topics":["reviews","verification"],"assertion":"Reviews have two flags: isVerified (parent was enrolled) and isApproved (moderation passed)","guidance":"Display isVerified badge for verified reviews. Hide reviews where isApproved=false from public.","evidence":"Review model: isVerified Boolean, isApproved Boolean","learned_from":"schema review","supersedes":null,"related_to":["FACT-c3d4e5f6"]}
{"id":"FACT-d0e1f2a3","content_hash":"sha256:7c8d9e0f1a2b3456","created_at":"2026-01-29T10:00:00Z","updated_at":"2026-01-29T10:00:00Z","status":"active","topics":["search","geo"],"assertion":"Daycare locations stored as latitude/longitude floats for geo-search","guidance":"Use Haversine formula or PostGIS for distance calculations. Index exists on (latitude, longitude).","evidence":"Daycare model: latitude Float, longitude Float with @@index","learned_from":"schema review","supersedes":null,"related_to":[]}
