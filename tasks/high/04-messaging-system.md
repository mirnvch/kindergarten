# Система обмена сообщениями

## Описание
Реализовать полноценный чат между родителями и детскими садами.

## Требования

### Функциональность
- [ ] Создание нового диалога с садом
- [ ] Отправка и получение сообщений
- [ ] Статусы сообщений (sent, delivered, read)
- [ ] Индикатор непрочитанных сообщений
- [ ] Архивирование диалогов

### UI компоненты
- `MessageList` - список диалогов
- `MessageThread` - отдельный диалог
- `MessageInput` - поле ввода с отправкой
- `MessageBubble` - отдельное сообщение
- `UnreadBadge` - счётчик непрочитанных

### Страницы
- `/messages` - список всех диалогов
- `/messages/[threadId]` - отдельный диалог

### Server Actions
```typescript
// src/server/actions/messages.ts
getMessageThreads()
getThreadMessages()
sendMessage()
markAsRead()
archiveThread()
createThread()
```

### Real-time (опционально для MVP)
- Polling каждые 30 секунд
- Или React Query с refetchInterval

## Критерии готовности
- Родитель может написать в детский сад
- Владелец видит и отвечает на сообщения
- Отображается количество непрочитанных
- Сообщения отмечаются как прочитанные
